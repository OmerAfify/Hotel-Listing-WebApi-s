2022-07-30 09:27:40.182 +02:00 [Information] [Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager] [{ Id: 63, Name: "UsingProfileAsKeyRepositoryWithDPAPI" }] User profile is available. Using '"C:\Users\zakaw\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2022-07-30 09:27:42.937 +02:00 [Information] [Microsoft.Hosting.Lifetime] [] Application started. Press Ctrl+C to shut down.
2022-07-30 09:27:42.937 +02:00 [Information] [Microsoft.Hosting.Lifetime] [] Hosting environment: "Development"
2022-07-30 09:27:42.938 +02:00 [Information] [Microsoft.Hosting.Lifetime] [] Content root path: "D:\6-Programming and courses\New Projects\Asp.net Core\HotelListing\HotelListing"
2022-07-30 09:27:43.080 +02:00 [Information] [Microsoft.AspNetCore.Hosting.Diagnostics] [{ Id: 1, Name: "RequestStarting" }] Request starting HTTP/2 GET https://localhost:44387/swagger/index.html - -
2022-07-30 09:27:43.405 +02:00 [Information] [Microsoft.AspNetCore.Hosting.Diagnostics] [{ Id: 2, Name: "RequestFinished" }] Request finished HTTP/2 GET https://localhost:44387/swagger/index.html - - - 200 - text/html;charset=utf-8 333.8639ms
2022-07-30 09:27:43.641 +02:00 [Information] [Microsoft.AspNetCore.Hosting.Diagnostics] [{ Id: 1, Name: "RequestStarting" }] Request starting HTTP/2 GET https://localhost:44387/swagger/swagger-ui.css - -
2022-07-30 09:27:43.641 +02:00 [Information] [Microsoft.AspNetCore.Hosting.Diagnostics] [{ Id: 1, Name: "RequestStarting" }] Request starting HTTP/2 GET https://localhost:44387/swagger/swagger-ui-bundle.js - -
2022-07-30 09:27:43.641 +02:00 [Information] [Microsoft.AspNetCore.Hosting.Diagnostics] [{ Id: 1, Name: "RequestStarting" }] Request starting HTTP/2 GET https://localhost:44387/swagger/swagger-ui-standalone-preset.js - -
2022-07-30 09:27:43.743 +02:00 [Information] [Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware] [{ Id: 6, Name: "FileNotModified" }] The file "/swagger-ui-bundle.js" was not modified
2022-07-30 09:27:43.747 +02:00 [Information] [Microsoft.AspNetCore.Hosting.Diagnostics] [{ Id: 2, Name: "RequestFinished" }] Request finished HTTP/2 GET https://localhost:44387/swagger/swagger-ui-bundle.js - - - 304 - application/javascript 105.9624ms
2022-07-30 09:27:43.974 +02:00 [Information] [Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware] [{ Id: 6, Name: "FileNotModified" }] The file "/swagger-ui-standalone-preset.js" was not modified
2022-07-30 09:27:43.974 +02:00 [Information] [Microsoft.AspNetCore.Hosting.Diagnostics] [{ Id: 2, Name: "RequestFinished" }] Request finished HTTP/2 GET https://localhost:44387/swagger/swagger-ui-standalone-preset.js - - - 304 - application/javascript 333.1953ms
2022-07-30 09:27:43.980 +02:00 [Information] [Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware] [{ Id: 6, Name: "FileNotModified" }] The file "/swagger-ui.css" was not modified
2022-07-30 09:27:43.980 +02:00 [Information] [Microsoft.AspNetCore.Hosting.Diagnostics] [{ Id: 2, Name: "RequestFinished" }] Request finished HTTP/2 GET https://localhost:44387/swagger/swagger-ui.css - - - 304 - text/css 339.1263ms
2022-07-30 09:27:44.566 +02:00 [Information] [Microsoft.AspNetCore.Hosting.Diagnostics] [{ Id: 1, Name: "RequestStarting" }] Request starting HTTP/2 GET https://localhost:44387/swagger/v1/swagger.json - -
2022-07-30 09:27:44.800 +02:00 [Information] [Microsoft.AspNetCore.Hosting.Diagnostics] [{ Id: 2, Name: "RequestFinished" }] Request finished HTTP/2 GET https://localhost:44387/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 234.4601ms
2022-07-30 09:28:12.385 +02:00 [Information] [Microsoft.AspNetCore.Hosting.Diagnostics] [{ Id: 1, Name: "RequestStarting" }] Request starting HTTP/2 POST https://localhost:44387/api/UserApi/loginWithJWT application/json-patch+json 67
2022-07-30 09:28:12.398 +02:00 [Information] [Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware] [{ Id: 10, Name: "NoCorsPolicyFound" }] No CORS policy found for the specified request.
2022-07-30 09:28:13.315 +02:00 [Information] [Microsoft.AspNetCore.Routing.EndpointMiddleware] [{ Name: "ExecutingEndpoint" }] Executing endpoint '"HotelListing.APIs.UserApiController.LoginWithJWT (HotelListing)"'
2022-07-30 09:28:13.413 +02:00 [Information] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] [{ Id: 3, Name: "ControllerActionExecuting" }] Route matched with "{action = \"LoginWithJWT\", controller = \"UserApi\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginWithJWT(HotelListing.DTOs.LoginUserDto)" on controller "HotelListing.APIs.UserApiController" ("HotelListing").
2022-07-30 09:28:17.608 +02:00 [Information] [Microsoft.EntityFrameworkCore.Infrastructure] [{ Id: 10403, Name: "Microsoft.EntityFrameworkCore.Infrastructure.ContextInitialized" }] Entity Framework Core "5.0.0" initialized '"ApplicationDbContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2022-07-30 09:28:20.024 +02:00 [Information] [Microsoft.EntityFrameworkCore.Database.Command] [{ Id: 20101, Name: "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted" }] Executed DbCommand ("164"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[firstName], [a].[lastName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0"
2022-07-30 09:28:20.991 +02:00 [Information] [Microsoft.EntityFrameworkCore.Database.Command] [{ Id: 20101, Name: "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted" }] Executed DbCommand ("12"ms) [Parameters=["@__userId_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0"
2022-07-30 09:28:21.258 +02:00 [Information] [Microsoft.AspNetCore.Hosting.Diagnostics] [{ Id: 1, Name: "RequestStarting" }] Request starting HTTP/1.1 GET https://localhost:44387/api/CountryApi - -
2022-07-30 09:28:21.397 +02:00 [Information] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] [{ Id: 1, Name: "ObjectResultExecuting" }] Executing "AcceptedResult", writing value of type '"<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=5.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]"'.
2022-07-30 09:28:21.411 +02:00 [Information] [Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler] [{ Id: 1, Name: "TokenValidationFailed" }] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '7/28/2022 11:18:18 AM', Current time: '7/30/2022 7:28:21 AM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2022-07-30 09:28:21.508 +02:00 [Information] [Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler] [{ Id: 7, Name: "AuthenticationSchemeNotAuthenticatedWithFailure" }] "Bearer" was not authenticated. Failure message: "IDX10223: Lifetime validation failed. The token is expired. ValidTo: '7/28/2022 11:18:18 AM', Current time: '7/30/2022 7:28:21 AM'."
2022-07-30 09:28:21.523 +02:00 [Information] [Microsoft.AspNetCore.Authorization.DefaultAuthorizationService] [{ Id: 2, Name: "UserAuthorizationFailed" }] Authorization failed. "These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user."
2022-07-30 09:28:21.533 +02:00 [Information] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] [{ Id: 2, Name: "ActionExecuted" }] Executed action "HotelListing.APIs.UserApiController.LoginWithJWT (HotelListing)" in 8105.3304ms
2022-07-30 09:28:21.535 +02:00 [Information] [Microsoft.AspNetCore.Routing.EndpointMiddleware] [{ Id: 1, Name: "ExecutedEndpoint" }] Executed endpoint '"HotelListing.APIs.UserApiController.LoginWithJWT (HotelListing)"'
2022-07-30 09:28:21.545 +02:00 [Information] [Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler] [{ Id: 12, Name: "AuthenticationSchemeChallenged" }] AuthenticationScheme: "Bearer" was challenged.
2022-07-30 09:28:21.549 +02:00 [Information] [Microsoft.AspNetCore.Hosting.Diagnostics] [{ Id: 2, Name: "RequestFinished" }] Request finished HTTP/1.1 GET https://localhost:44387/api/CountryApi - - - 401 - - 290.8864ms
2022-07-30 09:28:21.550 +02:00 [Information] [Microsoft.AspNetCore.Hosting.Diagnostics] [{ Id: 2, Name: "RequestFinished" }] Request finished HTTP/2 POST https://localhost:44387/api/UserApi/loginWithJWT application/json-patch+json 67 - 202 253 application/json;+charset=utf-8 9165.4357ms
2022-07-30 09:29:02.887 +02:00 [Information] [Microsoft.AspNetCore.Hosting.Diagnostics] [{ Id: 1, Name: "RequestStarting" }] Request starting HTTP/1.1 GET https://localhost:44387/api/CountryApi?Authorization=Bearer%20eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoib21hckBnbWFpbC5jb20iLCJleHAiOjE2NTkxNjcwMDAsImlzcyI6IkhvdGVsTGlzdGluZ0FQSSJ9.8ZSjQvfR_Kd6n_km5ZokckX7RaIo8iZJ2aS8NLH6O-U - -
2022-07-30 09:29:02.892 +02:00 [Information] [Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler] [{ Id: 1, Name: "TokenValidationFailed" }] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '7/28/2022 11:18:18 AM', Current time: '7/30/2022 7:29:02 AM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2022-07-30 09:29:02.893 +02:00 [Information] [Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler] [{ Id: 7, Name: "AuthenticationSchemeNotAuthenticatedWithFailure" }] "Bearer" was not authenticated. Failure message: "IDX10223: Lifetime validation failed. The token is expired. ValidTo: '7/28/2022 11:18:18 AM', Current time: '7/30/2022 7:29:02 AM'."
2022-07-30 09:29:02.894 +02:00 [Information] [Microsoft.AspNetCore.Authorization.DefaultAuthorizationService] [{ Id: 2, Name: "UserAuthorizationFailed" }] Authorization failed. "These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user."
2022-07-30 09:29:02.897 +02:00 [Information] [Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler] [{ Id: 12, Name: "AuthenticationSchemeChallenged" }] AuthenticationScheme: "Bearer" was challenged.
2022-07-30 09:29:02.906 +02:00 [Information] [Microsoft.AspNetCore.Hosting.Diagnostics] [{ Id: 2, Name: "RequestFinished" }] Request finished HTTP/1.1 GET https://localhost:44387/api/CountryApi?Authorization=Bearer%20eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoib21hckBnbWFpbC5jb20iLCJleHAiOjE2NTkxNjcwMDAsImlzcyI6IkhvdGVsTGlzdGluZ0FQSSJ9.8ZSjQvfR_Kd6n_km5ZokckX7RaIo8iZJ2aS8NLH6O-U - - - 401 - - 18.8158ms
2022-07-30 09:43:00.105 +02:00 [Information] [Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager] [{ Id: 63, Name: "UsingProfileAsKeyRepositoryWithDPAPI" }] User profile is available. Using '"C:\Users\zakaw\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2022-07-30 09:43:01.646 +02:00 [Information] [Microsoft.Hosting.Lifetime] [] Application started. Press Ctrl+C to shut down.
2022-07-30 09:43:01.647 +02:00 [Information] [Microsoft.Hosting.Lifetime] [] Hosting environment: "Development"
2022-07-30 09:43:01.648 +02:00 [Information] [Microsoft.Hosting.Lifetime] [] Content root path: "D:\6-Programming and courses\New Projects\Asp.net Core\HotelListing\HotelListing"
2022-07-30 09:43:01.752 +02:00 [Information] [Microsoft.AspNetCore.Hosting.Diagnostics] [{ Id: 1, Name: "RequestStarting" }] Request starting HTTP/2 GET https://localhost:44387/swagger/v1/swagger.json - -
2022-07-30 09:43:01.752 +02:00 [Information] [Microsoft.AspNetCore.Hosting.Diagnostics] [{ Id: 1, Name: "RequestStarting" }] Request starting HTTP/2 GET https://localhost:44387/swagger/index.html - -
2022-07-30 09:43:02.077 +02:00 [Information] [Microsoft.AspNetCore.Hosting.Diagnostics] [{ Id: 2, Name: "RequestFinished" }] Request finished HTTP/2 GET https://localhost:44387/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 330.5389ms
2022-07-30 09:43:02.077 +02:00 [Information] [Microsoft.AspNetCore.Hosting.Diagnostics] [{ Id: 2, Name: "RequestFinished" }] Request finished HTTP/2 GET https://localhost:44387/swagger/index.html - - - 200 - text/html;charset=utf-8 333.0430ms
2022-07-30 09:43:02.563 +02:00 [Information] [Microsoft.AspNetCore.Hosting.Diagnostics] [{ Id: 1, Name: "RequestStarting" }] Request starting HTTP/2 GET https://localhost:44387/swagger/v1/swagger.json - -
2022-07-30 09:43:02.572 +02:00 [Information] [Microsoft.AspNetCore.Hosting.Diagnostics] [{ Id: 2, Name: "RequestFinished" }] Request finished HTTP/2 GET https://localhost:44387/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 9.0443ms
2022-07-30 09:44:14.106 +02:00 [Information] [Microsoft.AspNetCore.Hosting.Diagnostics] [{ Id: 1, Name: "RequestStarting" }] Request starting HTTP/1.1 POST https://localhost:44387/api/UserApi/loginWithJWT application/json 72
2022-07-30 09:44:14.843 +02:00 [Information] [Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler] [{ Id: 1, Name: "TokenValidationFailed" }] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2022-07-30 09:44:14.950 +02:00 [Information] [Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler] [{ Id: 7, Name: "AuthenticationSchemeNotAuthenticatedWithFailure" }] "Bearer" was not authenticated. Failure message: "IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'."
2022-07-30 09:44:14.954 +02:00 [Information] [Microsoft.AspNetCore.Routing.EndpointMiddleware] [{ Name: "ExecutingEndpoint" }] Executing endpoint '"HotelListing.APIs.UserApiController.LoginWithJWT (HotelListing)"'
2022-07-30 09:44:15.093 +02:00 [Information] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] [{ Id: 3, Name: "ControllerActionExecuting" }] Route matched with "{action = \"LoginWithJWT\", controller = \"UserApi\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginWithJWT(HotelListing.DTOs.LoginUserDto)" on controller "HotelListing.APIs.UserApiController" ("HotelListing").
2022-07-30 09:44:19.738 +02:00 [Information] [Microsoft.EntityFrameworkCore.Infrastructure] [{ Id: 10403, Name: "Microsoft.EntityFrameworkCore.Infrastructure.ContextInitialized" }] Entity Framework Core "5.0.0" initialized '"ApplicationDbContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2022-07-30 09:44:22.404 +02:00 [Information] [Microsoft.EntityFrameworkCore.Database.Command] [{ Id: 20101, Name: "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted" }] Executed DbCommand ("251"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[firstName], [a].[lastName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0"
2022-07-30 09:44:23.111 +02:00 [Information] [Microsoft.EntityFrameworkCore.Database.Command] [{ Id: 20101, Name: "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted" }] Executed DbCommand ("18"ms) [Parameters=["@__userId_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0"
2022-07-30 09:44:23.286 +02:00 [Information] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] [{ Id: 1, Name: "ObjectResultExecuting" }] Executing "AcceptedResult", writing value of type '"<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=5.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]"'.
2022-07-30 09:44:23.496 +02:00 [Information] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] [{ Id: 2, Name: "ActionExecuted" }] Executed action "HotelListing.APIs.UserApiController.LoginWithJWT (HotelListing)" in 8387.0862ms
2022-07-30 09:44:23.498 +02:00 [Information] [Microsoft.AspNetCore.Routing.EndpointMiddleware] [{ Id: 1, Name: "ExecutedEndpoint" }] Executed endpoint '"HotelListing.APIs.UserApiController.LoginWithJWT (HotelListing)"'
2022-07-30 09:44:23.512 +02:00 [Information] [Microsoft.AspNetCore.Hosting.Diagnostics] [{ Id: 2, Name: "RequestFinished" }] Request finished HTTP/1.1 POST https://localhost:44387/api/UserApi/loginWithJWT application/json 72 - 202 253 application/json;+charset=utf-8 9405.9673ms
2022-07-30 09:44:45.764 +02:00 [Information] [Microsoft.AspNetCore.Hosting.Diagnostics] [{ Id: 1, Name: "RequestStarting" }] Request starting HTTP/1.1 GET https://localhost:44387/api/CountryApi/1 application/json 72
2022-07-30 09:44:45.834 +02:00 [Information] [Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler] [{ Id: 1, Name: "TokenValidationFailed" }] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2022-07-30 09:44:45.836 +02:00 [Information] [Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler] [{ Id: 7, Name: "AuthenticationSchemeNotAuthenticatedWithFailure" }] "Bearer" was not authenticated. Failure message: "IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'."
2022-07-30 09:44:45.836 +02:00 [Information] [Microsoft.AspNetCore.Routing.EndpointMiddleware] [{ Name: "ExecutingEndpoint" }] Executing endpoint '"HotelListing.APIs.CountryApiController.GetCountryById (HotelListing)"'
2022-07-30 09:44:45.872 +02:00 [Information] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] [{ Id: 3, Name: "ControllerActionExecuting" }] Route matched with "{action = \"GetCountryById\", controller = \"CountryApi\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCountryById(Int32)" on controller "HotelListing.APIs.CountryApiController" ("HotelListing").
2022-07-30 09:44:45.933 +02:00 [Information] [Microsoft.EntityFrameworkCore.Infrastructure] [{ Id: 10403, Name: "Microsoft.EntityFrameworkCore.Infrastructure.ContextInitialized" }] Entity Framework Core "5.0.0" initialized '"ApplicationDbContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2022-07-30 09:44:45.955 +02:00 [Information] [Microsoft.EntityFrameworkCore.Database.Command] [{ Id: 20101, Name: "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted" }] Executed DbCommand ("9"ms) [Parameters=["@__id_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [c].[countryId], [c].[countryName], [c].[countryShortName]
FROM [countries] AS [c]
WHERE [c].[countryId] = @__id_0"
2022-07-30 09:44:46.023 +02:00 [Information] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] [{ Id: 1, Name: "ObjectResultExecuting" }] Executing "OkObjectResult", writing value of type '"HotelListing.DTOs.CountryDTO"'.
2022-07-30 09:44:46.037 +02:00 [Information] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] [{ Id: 2, Name: "ActionExecuted" }] Executed action "HotelListing.APIs.CountryApiController.GetCountryById (HotelListing)" in 164.8419ms
2022-07-30 09:44:46.038 +02:00 [Information] [Microsoft.AspNetCore.Routing.EndpointMiddleware] [{ Id: 1, Name: "ExecutedEndpoint" }] Executed endpoint '"HotelListing.APIs.CountryApiController.GetCountryById (HotelListing)"'
2022-07-30 09:44:46.041 +02:00 [Information] [Microsoft.AspNetCore.Hosting.Diagnostics] [{ Id: 2, Name: "RequestFinished" }] Request finished HTTP/1.1 GET https://localhost:44387/api/CountryApi/1 application/json 72 - 200 62 application/json;+charset=utf-8 277.0325ms
2022-07-30 09:44:52.375 +02:00 [Information] [Microsoft.AspNetCore.Hosting.Diagnostics] [{ Id: 1, Name: "RequestStarting" }] Request starting HTTP/1.1 GET https://localhost:44387/api/CountryApi/2 application/json 72
2022-07-30 09:44:52.394 +02:00 [Information] [Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler] [{ Id: 1, Name: "TokenValidationFailed" }] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2022-07-30 09:44:52.396 +02:00 [Information] [Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler] [{ Id: 7, Name: "AuthenticationSchemeNotAuthenticatedWithFailure" }] "Bearer" was not authenticated. Failure message: "IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'."
2022-07-30 09:44:52.396 +02:00 [Information] [Microsoft.AspNetCore.Routing.EndpointMiddleware] [{ Name: "ExecutingEndpoint" }] Executing endpoint '"HotelListing.APIs.CountryApiController.GetCountryById (HotelListing)"'
2022-07-30 09:44:52.398 +02:00 [Information] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] [{ Id: 3, Name: "ControllerActionExecuting" }] Route matched with "{action = \"GetCountryById\", controller = \"CountryApi\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCountryById(Int32)" on controller "HotelListing.APIs.CountryApiController" ("HotelListing").
2022-07-30 09:44:52.433 +02:00 [Information] [Microsoft.EntityFrameworkCore.Infrastructure] [{ Id: 10403, Name: "Microsoft.EntityFrameworkCore.Infrastructure.ContextInitialized" }] Entity Framework Core "5.0.0" initialized '"ApplicationDbContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2022-07-30 09:44:52.445 +02:00 [Information] [Microsoft.EntityFrameworkCore.Database.Command] [{ Id: 20101, Name: "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted" }] Executed DbCommand ("5"ms) [Parameters=["@__id_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [c].[countryId], [c].[countryName], [c].[countryShortName]
FROM [countries] AS [c]
WHERE [c].[countryId] = @__id_0"
2022-07-30 09:44:52.448 +02:00 [Information] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] [{ Id: 1, Name: "ObjectResultExecuting" }] Executing "OkObjectResult", writing value of type '"HotelListing.DTOs.CountryDTO"'.
2022-07-30 09:44:52.449 +02:00 [Information] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] [{ Id: 2, Name: "ActionExecuted" }] Executed action "HotelListing.APIs.CountryApiController.GetCountryById (HotelListing)" in 50.2654ms
2022-07-30 09:44:52.449 +02:00 [Information] [Microsoft.AspNetCore.Routing.EndpointMiddleware] [{ Id: 1, Name: "ExecutedEndpoint" }] Executed endpoint '"HotelListing.APIs.CountryApiController.GetCountryById (HotelListing)"'
2022-07-30 09:44:52.450 +02:00 [Information] [Microsoft.AspNetCore.Hosting.Diagnostics] [{ Id: 2, Name: "RequestFinished" }] Request finished HTTP/1.1 GET https://localhost:44387/api/CountryApi/2 application/json 72 - 200 69 application/json;+charset=utf-8 75.0205ms
2022-07-30 09:44:56.196 +02:00 [Information] [Microsoft.AspNetCore.Hosting.Diagnostics] [{ Id: 1, Name: "RequestStarting" }] Request starting HTTP/1.1 GET https://localhost:44387/api/CountryApi application/json 72
2022-07-30 09:44:56.197 +02:00 [Information] [Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler] [{ Id: 1, Name: "TokenValidationFailed" }] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2022-07-30 09:44:56.198 +02:00 [Information] [Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler] [{ Id: 7, Name: "AuthenticationSchemeNotAuthenticatedWithFailure" }] "Bearer" was not authenticated. Failure message: "IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'."
2022-07-30 09:44:56.222 +02:00 [Information] [Microsoft.AspNetCore.Authorization.DefaultAuthorizationService] [{ Id: 2, Name: "UserAuthorizationFailed" }] Authorization failed. "These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user."
2022-07-30 09:44:56.243 +02:00 [Information] [Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler] [{ Id: 12, Name: "AuthenticationSchemeChallenged" }] AuthenticationScheme: "Bearer" was challenged.
2022-07-30 09:44:56.247 +02:00 [Information] [Microsoft.AspNetCore.Hosting.Diagnostics] [{ Id: 2, Name: "RequestFinished" }] Request finished HTTP/1.1 GET https://localhost:44387/api/CountryApi application/json 72 - 401 - - 51.3685ms
2022-07-30 09:45:10.194 +02:00 [Information] [Microsoft.AspNetCore.Hosting.Diagnostics] [{ Id: 1, Name: "RequestStarting" }] Request starting HTTP/1.1 GET https://localhost:44387/api/CountryApi application/json 72
2022-07-30 09:45:10.205 +02:00 [Information] [Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler] [{ Id: 1, Name: "TokenValidationFailed" }] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidAudienceException: IDX10208: Unable to validate audience. validationParameters.ValidAudience is null or whitespace and validationParameters.ValidAudiences is null.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateAudience(IEnumerable`1 audiences, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateAudience(IEnumerable`1 audiences, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2022-07-30 09:45:10.206 +02:00 [Information] [Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler] [{ Id: 7, Name: "AuthenticationSchemeNotAuthenticatedWithFailure" }] "Bearer" was not authenticated. Failure message: "IDX10208: Unable to validate audience. validationParameters.ValidAudience is null or whitespace and validationParameters.ValidAudiences is null."
2022-07-30 09:45:10.207 +02:00 [Information] [Microsoft.AspNetCore.Authorization.DefaultAuthorizationService] [{ Id: 2, Name: "UserAuthorizationFailed" }] Authorization failed. "These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user."
2022-07-30 09:45:10.208 +02:00 [Information] [Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler] [{ Id: 12, Name: "AuthenticationSchemeChallenged" }] AuthenticationScheme: "Bearer" was challenged.
2022-07-30 09:45:10.211 +02:00 [Information] [Microsoft.AspNetCore.Hosting.Diagnostics] [{ Id: 2, Name: "RequestFinished" }] Request finished HTTP/1.1 GET https://localhost:44387/api/CountryApi application/json 72 - 401 - - 16.5190ms
